(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{1136:function(e,t,a){"use strict";t.__esModule=!0,t.default=function(e){var t=e.setClassName?e.setClassName:"";return n.default.createElement("div",{className:"col-xs-12 col-sm-6 appcard clearfix "+t},e.children)};var n=function(e){return e&&e.__esModule?e:{default:e}}(a(1))},1163:function(e,t,a){"use strict";t.__esModule=!0;var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},r=a(1),o=u(r),s=a(510),i=a(16),l=(a(102),a(39)),p=u(a(91)),c=u(a(1136));function u(e){return e&&e.__esModule?e:{default:e}}var d=function(e){function t(a){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,a));return n.config=p.default,n.categories={appbase:"general",reactivemaps:"reactivemaps",reactivesearch:"reactivesearch"},n.state={showModal:!!n.props.showModal&&n.props.showModal,validate:{value:!0,error:null},value:"",importer:!1,category:n.categories[n.config.name],es_version:"5"},n.errors={duplicate:"Duplicate app",required:"Appname is required!",notavailable:"Appname is not available, please choose different name.",format:"Only use a-z,A-Z,0-9 and -._+$@ chars for the name."},n.handleChange=n.handleChange.bind(n),n.handleSubmit=n.handleSubmit.bind(n),n.open=n.open.bind(n),n.close=n.close.bind(n),n.gotoImporter=n.gotoImporter.bind(n),n.chooseCategory=n.chooseCategory.bind(n),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.close=function(){this.setState({showModal:!1})},t.prototype.open=function(){this.setState({showModal:!0})},t.prototype.componentWillReceiveProps=function(e){e.createAppError&&e.createAppError.Message?e.createAppError.Message.indexOf("duplicate")>-1?this.createAppError=this.errors.duplicate:this.createAppError=e.createAppError:e.clearInput&&(this.setState({value:""}),this.close())},t.prototype.chooseCategory=function(e){this.setState({category:e})},t.prototype.validateApp=function(e){var t={value:!0,error:null};if(this.createAppError=null,e=e.trim()){if(/^[a-zA-Z0-9_+-@$\.]+$/.test(e)){var a=this.props.apps.filter(function(t){return e===t.appname});a&&a.length&&(t.value=!1,t.error=this.errors.duplicate)}else t.value=!1,t.error=this.errors.format}else t.value=!1,t.error=this.errors.required;return t},t.prototype.handleChange=function(e){var t=e.target.value;this.setState({value:t,validate:this.validateApp(t)})},t.prototype.renderElement=function(e){var t=null;switch(e){case"helpBlock":(this.state.validate.error||this.createAppError)&&(t=o.default.createElement("div",{className:"alert alert-warning",role:"alert"},this.state.validate.error||this.createAppError))}return t},t.prototype.handleSubmit=function(){var e=this;this.inputboxRef.focus();var t=this.state.value.trim();t&&(this.setState({createAppLoading:!0}),i.appbaseService.isAppNameAvailable(t).then(function(t){e.checkAppValidation(t)}).catch(function(t){e.checkAppValidation(t)}))},t.prototype.checkAppValidation=function(e){if(e&&e.status&&404===e.status){var t={appname:this.state.value,es_version:this.state.es_version,category:this.state.category};this.state.importer?(i.appbaseService.importerConfig=t,this.gotoImporter()):this.props.createApp(t),this.setState({createAppLoading:!1})}else{var a={value:!1,error:this.errors.notavailable};this.setState({validate:a,createAppLoading:!1})}},t.prototype.chooseEs=function(e){this.setState({es_version:e})},t.prototype.gotoImporter=function(){i.appbaseService.pushUrl("/importer")},t.prototype.changeImporter=function(e){this.setState({importer:e})},t.prototype.render=function(){var e=this;return o.default.createElement(c.default,{setClassName:"appcard-newapp col-md-3"},o.default.createElement("div",{className:"ad-list-newapp"},o.default.createElement("button",{className:"col-xs-12 ad-theme-btn primary",onClick:this.open},"Create a New App"),o.default.createElement(s.Modal,{className:"modal-info ad-list-newapp-modal",show:this.state.showModal,onHide:this.close},o.default.createElement(s.Modal.Header,{closeButton:!0},o.default.createElement(s.Modal.Title,null,"Create A New App")),o.default.createElement(s.Modal.Body,{className:"clearfix"},o.default.createElement("div",{className:"row ad-list-newapp-form"},o.default.createElement("div",{className:"col-xs-12 form-group "+(this.state.validate.error?"has-error":"")},o.default.createElement("label",null,"App name"),o.default.createElement("input",{ref:function(t){return e.inputboxRef=t},type:"text",placeholder:"Enter an app name (no spaces)",value:this.state.value,className:"form-control",onChange:this.handleChange}),this.renderElement("helpBlock")),o.default.createElement("div",{className:"col-xs-12 form-group"},o.default.createElement("label",null,"Do you have a JSON or CSV dataset that you would like to import into the app?"),o.default.createElement("div",null,o.default.createElement("label",{className:"radio-inline"},o.default.createElement("input",{type:"radio",name:"inlineRadioOptions",id:"inlineRadio1",checked:this.state.importer,onChange:function(){return e.changeImporter(!0)}})," ","Yes",o.default.createElement("span",{className:"checkmark"})),o.default.createElement("label",{className:"radio-inline"},o.default.createElement("input",{type:"radio",name:"inlineRadioOptions",id:"inlineRadio2",checked:!this.state.importer,onChange:function(){return e.changeImporter(!1)}})," ","No",o.default.createElement("span",{className:"checkmark"})))),o.default.createElement("div",{className:"col-xs-12 p-0"},o.default.createElement("div",{className:"col-xs-12 col-sm-6 form-group"},o.default.createElement("label",null,"Elasticsearch version"),o.default.createElement("div",null,o.default.createElement("label",{className:"radio-inline"},o.default.createElement("input",{type:"radio",name:"inlineRadioOptions3",id:"inlineRadio3",checked:"2"===this.state.es_version,onChange:function(){return e.chooseEs("2")}})," ","2",o.default.createElement("span",{className:"checkmark"})),o.default.createElement("label",{className:"radio-inline"},o.default.createElement("input",{type:"radio",name:"inlineRadioOptions4",id:"inlineRadio4",checked:"5"===this.state.es_version,onChange:function(){return e.chooseEs("5")}})," ","5",o.default.createElement("span",{className:"checkmark"})))),o.default.createElement("div",{className:"col-xs-12 col-sm-6 form-group"},o.default.createElement("label",null,"Category"),o.default.createElement("div",null,o.default.createElement("span",{className:"ad-dropdown dropdown"},o.default.createElement("button",{className:"dropdown-toggle",type:"button",id:"category-menu","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"true"},this.state.category,"  ",o.default.createElement("span",{className:"caret"})),o.default.createElement("ul",{className:"ad-dropdown-menu dropdown-menu","aria-labelledby":"category-menu"},Object.keys(this.categories).map(function(t){return o.default.createElement("li",{key:t},o.default.createElement("a",{onClick:function(){return e.chooseCategory(e.categories[t])}},e.categories[t]))}))))))),o.default.createElement("div",{className:"col-xs-12 p-0 ad-list-newapp-footer"},o.default.createElement("button",n({className:"ad-theme-btn primary"},l.common.isDisabled(!this.state.validate.value||this.props.createAppLoading),{onClick:this.handleSubmit}),this.props.createAppLoading||this.state.createAppLoading?"Please wait...":"Create App"))))))},t}(r.Component);t.default=d,d.propTypes={},d.defaultProps={}},1201:function(e,t,a){"use strict";t.__esModule=!0;var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},r=a(1),o=u(r),s=u(a(141)),i=a(16),l=u(a(1202)),p=u(a(1203)),c=u(a(1204));function u(e){return e&&e.__esModule?e:{default:e}}var d=function(e){function t(a){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,a));return n.stopBubble=n.stopBubble.bind(n),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.stopBubble=function(e){e.stopPropagation()},t.prototype.isDifferentOwner=function(){return!!(this.props.app&&i.appbaseService&&i.appbaseService.userInfo&&i.appbaseService.userInfo.body&&this.props.app.owner!==i.appbaseService.userInfo.body.email)},t.prototype.render=function(){return o.default.createElement("aside",{className:"options clearfix",onClick:this.stopBubble},o.default.createElement(s.default,{overlay:o.default.createElement("div",null,"Clone this app"),mouseLeaveDelay:0},o.default.createElement("div",{className:"options-item"},o.default.createElement(c.default,{app:this.props.app}))),o.default.createElement(s.default,{overlay:o.default.createElement("div",null,"Copy read credentials"),mouseLeaveDelay:0},o.default.createElement("div",{className:"options-item"},o.default.createElement(p.default,n({},this.props,{type:"readPermission",label:"Read",icon:"fa-eye"})))),o.default.createElement(s.default,{overlay:o.default.createElement("div",null,"Copy write credentials"),mouseLeaveDelay:0},o.default.createElement("div",{className:"options-item"},o.default.createElement(p.default,n({},this.props,{type:"writePermission",label:"Write",icon:"fa-key"})))),this.isDifferentOwner()?null:o.default.createElement("div",{title:"Delete the app",className:"options-item"},o.default.createElement(l.default,this.props)))},t}(r.Component);t.default=d},1202:function(e,t,a){"use strict";t.__esModule=!0;var n=a(1),r=s(n),o=s(a(436));function s(e){return e&&e.__esModule?e:{default:e}}var i=function(e){function t(a){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,a));return n.confirmBoxInfo={title:r.default.createElement("span",null,"Delete App"),description:r.default.createElement("p",null,"Type the app name ",r.default.createElement("strong",null,n.props.app.appname)," below to delete the app. This action cannot be undone."),validate:{value:n.props.app.appname,placeholder:"Type appname..."},buttons:{cancel:"Go back",confirm:"Confirm"}},n.deleteApp=n.deleteApp.bind(n),n.setAside=n.setAside.bind(n),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.deleteApp=function(){this.props.deleteApp(this.props.app)},t.prototype.setAside=function(){$(".ad-list-app-content aside").hide(),setTimeout(function(){$(".ad-list-app-content aside").show()},1e3)},t.prototype.render=function(){return r.default.createElement(o.default,{info:this.confirmBoxInfo,onConfirm:this.deleteApp,type:"danger",onClose:this.setAside},r.default.createElement("button",{"aria-label":"Delete app","data-effect":"solid","data-place":"left","data-offset":"{'top': 0, 'left': 0}",className:"card-icon pointer"},r.default.createElement("i",{className:"fas fa-trash-alt"})))},t}(n.Component);t.default=i},1203:function(t,a,n){"use strict";a.__esModule=!0;var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},o=n(1),s=p(o),i=p(n(512)),l=n(39);function p(e){return e&&e.__esModule?e:{default:e}}var c=function(t){function a(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,t.call(this,e));return n.cset=!1,n.state={credentials:null},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(a,t),a.prototype.componentDidUpdate=function(){this.props.app&&this.props.app&&this.props.app[this.props.type]&&!this.cset&&(this.cset=!0,this.getPermission())},a.prototype.componentWillUnmount=function(){this.stopUpdate=!0},a.prototype.getPermission=function(){var e=this.props.app[this.props.type];if(e&&e.username){var t=e.username+":"+e.password;this.setState({singleCredential:e,credentials:t})}},a.prototype.ccSuccess=function(){toastr.success(this.props.label+" Credentials has been copied successully!"),this.state.singleCredential.write&&toastr.warning('The copied credentials can modify data in your app, do not use them in code that runs in the web browser. Instead, generate <a href="guide-link">read-only credentials</a>.')},a.prototype.ccError=function(){toastr.error("Error",e)},a.prototype.render=function(){var e=this;return this.state.credentials?s.default.createElement("div",null,s.default.createElement(i.default,{onSuccess:function(){return e.ccSuccess()},onError:function(){return e.ccError()}},s.default.createElement("button",r({},l.common.isDisabled(!this.state.credentials),{"aria-label":"Copy "+this.props.label+" Credentials","data-effect":"solid","data-place":"left","data-offset":"{'top': 0, 'left': 0}",className:"card-icon pointer","data-clipboard-text":this.state.credentials}),this.props.I,s.default.createElement("i",{className:"fas "+this.props.icon})))):s.default.createElement("span",null)},a}(o.Component);a.default=c},1204:function(e,t,a){"use strict";t.__esModule=!0;var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},r=a(1),o=function(e){return e&&e.__esModule?e:{default:e}}(r),s=a(39);var i=function(e){function t(a){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,a));return n.state={cloneAppLink:null},n.cloneApp=n.cloneApp.bind(n),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.componentWillReceiveProps=function(e){if(e.app&&e.app.permissions&&e.app.permissions.length){var t={platform:"appbase",importFrom:{appname:e.app.appname,hosturl:"https://"+e.app.permissions[0].username+":"+e.app.permissions[0].password+"@scalr.api.appbase.io"}};this.setState({cloneAppLink:"https://opensource.appbase.io/dejavu/importer?app="+JSON.stringify(t)})}},t.prototype.cloneApp=function(e){window.open(this.state.cloneAppLink,"_blank"),e.stopPropagation()},t.prototype.render=function(){return o.default.createElement("button",n({"aria-label":"Clone this app",onClick:this.cloneApp},s.common.isDisabled(!this.state.cloneAppLink),{className:"ad-theme-btn-transparent ad-list-app-header-clone card-icon pointer"}),o.default.createElement("i",{className:"fas fa-code-branch"}))},t}(r.Component);t.default=i},1205:function(e,t,a){"use strict";t.__esModule=!0;var n=a(1),r=function(e){return e&&e.__esModule?e:{default:e}}(n),o=a(16);var s=function(e){function t(a){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,a));return n.handleChange=n.handleChange.bind(n),n.state={value:o.appbaseService.sortBy.field},n.options=o.appbaseService.sortOptions,n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.handleChange=function(e){this.setState({value:e},this.applySort)},t.prototype.applySort=function(){this.props.registerApps(o.appbaseService.applySort(this.props.apps,this.state.value))},t.prototype.render=function(){var e=this;return r.default.createElement("span",{className:"ad-dropdown dropdown pull-right"},r.default.createElement("button",{className:"dropdown-toggle",type:"button",id:"sortby-menu","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"true"},"Sort by ",this.options[this.state.value]||this.options.api_calls,"  ",r.default.createElement("span",{className:"caret"})),r.default.createElement("ul",{className:"ad-dropdown-menu dropdown-menu pull-right","aria-labelledby":"sortby-menu"},Object.keys(this.options).map(function(t){return r.default.createElement("li",{key:t},r.default.createElement("a",{onClick:function(){return e.handleChange(t)}},e.options[t]))})))},t}(n.Component);t.default=s},1206:function(e,t,a){"use strict";t.__esModule=!0;var n=a(1),r=function(e){return e&&e.__esModule?e:{default:e}}(n),o=a(16);var s=function(e){function t(a){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,a));return n.handleChange=n.handleChange.bind(n),n.state={value:""},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.handleChange=function(e){this.setState({value:e.target.value},this.applyFilter)},t.prototype.applyFilter=function(){this.props.registerApps(o.appbaseService.filterByAppname(this.state.value))},t.prototype.render=function(){return r.default.createElement("span",{className:"ad-filterbyappname pull-left"},r.default.createElement("input",{type:"text",className:"form-control",value:this.state.value,onChange:this.handleChange,placeholder:"Filter cards by app name"}))},t}(n.Component);t.default=s},1207:function(e,t,a){"use strict";t.__esModule=!0;var n=a(1),r=function(e){return e&&e.__esModule?e:{default:e}}(n),o=a(16);var s=function(e){function t(a){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,a));return n.handleChange=n.handleChange.bind(n),n.state={sharedApps:o.appbaseService.sharedApps},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.handleChange=function(e){this.setState({sharedApps:e.target.checked},this.applyFilter),this.props.toggleShared()},t.prototype.applyFilter=function(){this.props.registerApps(o.appbaseService.filterBySharedApps(this.state.sharedApps))},t.prototype.render=function(){return r.default.createElement("span",{className:"ad-filterbyowner pull-left"},r.default.createElement("label",{htmlFor:"filterowner",className:"ad-filter-shareapps checkbox-inline"},r.default.createElement("input",{type:"checkbox",id:"filterowner",checked:this.state.sharedApps,onChange:this.handleChange}),"Show shared apps"))},t}(n.Component);t.default=s},1208:function(e,t,a){"use strict";t.__esModule=!0;var n=a(1),r=function(e){return e&&e.__esModule?e:{default:e}}(n),o=a(42),s=a(502);var i=function(e){function t(a){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,a));return n.state={showAlert:!1,exceedsApps:[]},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.componentWillReceiveProps=function(e){var t=this,a=[];e.plan&&e.apps&&(e.apps.forEach(function(n){var r={action:t.getPercentage(n,"action",e.plan),records:t.getPercentage(n,"records",e.plan),name:n.name,id:n.id};(r.action>=100||r.records>=100)&&a.push(r)}),this.setState({exceedsApps:a,showAlert:!!a.length}))},t.prototype.getPercentage=function(e,t,a){var n=100*("action"===t?e.info&&e.info.appStats&&e.info.appStats.calls?e.info.appStats.calls:0:e.info&&e.info.appStats&&e.info.appStats.records?e.info.appStats.records:0)/s.billingService.planLimits[a][t];return n=n<100?n:100},t.prototype.close=function(){this.setState({showAlert:!1})},t.prototype.render=function(){var e=this;return r.default.createElement("div",null,this.state.showAlert?r.default.createElement("div",{className:"alert alert-warning alert-dismissible"},r.default.createElement("button",{type:"button",className:"close",onClick:function(){return e.close()}},r.default.createElement("span",{"aria-hidden":"true"},"×")),1===this.state.exceedsApps.length?"One of your apps is":"More than one of your apps are"," ","exceeding the usage limit for ",this.props.plan," ",r.default.createElement(o.Link,{to:"/billing",className:""},"Upgrade your plan to keep accessing the data.")):null)},t}(n.Component);t.default=i},323:function(e,t,a){"use strict";t.__esModule=!0;var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},r=a(1),o=S(r),s=a(1123),i=S(a(37)),l=S(a(1163)),p=S(a(1201)),c=S(a(1136)),u=a(16),d=a(502),f=a(39),h=a(102),m=S(a(1205)),b=S(a(1206)),y=S(a(1207)),v=S(a(1208)),g=S(a(91)),E=S(a(160)),w=S(a(140));function S(e){return e&&e.__esModule?e:{default:e}}var C=a(591),A=function(e){return o.default.createElement(c.default,n({},e,{setClassName:"col-md-6"}),o.default.createElement("h3",{className:"title name"},"Hi ",e.name?e.name.split(" ")[0]:null,","),o.default.createElement("p",{className:"description"},"This is your apps manager view. Here, you can create a new app and manage your existing apps."))},_=function(e){return o.default.createElement(c.default,n({style:{textAlign:"center"}},e,{setClassName:"col-md-3"}),o.default.createElement("h3",{className:"title quick-links"},"Quick Links"),g.default.quickLinks)},N=function(e){function t(a){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,a));return n.state={apps:[],plan:"free",createAppLoading:!1,createAppError:null,clearInput:!1,loading:!0,showShared:u.appbaseService.getShareApps()},n.themeColor=g.default.accent,n.trailColor="#eee",n.createApp=n.createApp.bind(n),n.deleteApp=n.deleteApp.bind(n),n.registerApps=n.registerApps.bind(n),n.toggleShared=n.toggleShared.bind(n),n.config=g.default,n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.componentWillMount=function(){this.stopUpdate=!1,u.appbaseService.userInfo?this.initialize():u.appbaseService.pushUrl()},t.prototype.deleteApp=function(e){var t=this;u.appbaseService.deleteApp(e.id).then(function(a){var n=t.state.apps.filter(function(t){return t.id!==e.id});u.appbaseService.preservedApps=u.appbaseService.preservedApps.filter(function(t){return t.id!==e.id}),0===u.appbaseService.preservedApps.length&&u.appbaseService.pushUrl("/tutorial"),t.setState({apps:n})}).catch(function(e){console.log(e)})},t.prototype.componentWillUnmount=function(){this.stopUpdate=!0},t.prototype.initialize=function(){this.setSort=!0,this.getBillingInfo(),this.getApps()},t.prototype.getApps=function(){var e=this;u.appbaseService.allApps().then(function(t){var a=t.body;u.appbaseService.setPreservedApps(a),e.registerApps(a,!0)}).catch(function(e){console.log(e),u.appbaseService.pushUrl("/login")})},t.prototype.registerApps=function(e){var t=this,a=arguments.length>1&&void 0!==arguments[1]&&arguments[1];(0!==u.appbaseService.preservedApps.length||u.appbaseService.filterAppName.trim().length)&&this.setState({apps:e},function(){a&&t.getAppInfo.call(t)})},t.prototype.getBillingInfo=function(){var e=this;if(u.appbaseService.userInfo&&u.appbaseService.userInfo.body&&u.appbaseService.userInfo.body.c_id){var t={c_id:u.appbaseService.userInfo.body.c_id};d.billingService.getCustomer(t).then(function(t){var a=Object.keys(d.billingService.planLimits).indexOf(t.plan)>-1?t.plan:"free";e.setState({billingInfo:t,plan:a})}).catch(function(e){console.log(e)})}},t.prototype.calcPercentage=function(e,t){var a="action"===t?e&&e.api_calls?e.api_calls:0:e&&e.records?e.records:0,n=100*a/d.billingService.planLimits[this.state.plan][t];return{percentage:n=n<100?n:100,count:a}},t.prototype.getAppInfo=function(){var e=this,t=this.state.apps;u.appbaseService.allMetrics().then(function(a){t=t.map(function(e){return Object.assign(e,a.body[e.id])}),t=u.appbaseService.applySort(t,u.appbaseService.sortBy.field),t=u.appbaseService.filterBySharedApps(),e.registerApps(t),e.setIntercomData(a.body),e.setState({loading:!1})}).catch(function(e){console.log(e)}),u.appbaseService.allPermissions().then(function(a){t=t.map(function(e){return Object.assign(e,f.appListHelper.filterPermissions(a.body[e.id]))}),e.registerApps(t)}).catch(function(e){console.log(e)})},t.prototype.setIntercomData=function(e){var t,a=((t={email:u.appbaseService.userInfo.body.email,calls:0,records:0,apps:Object.keys(e).length})[g.default.name]=!0,t);Object.keys(e).forEach(function(t){a.calls+=e[t].api_calls,a.records+=e[t].records}),f.intercomService.update(a)},t.prototype.updateApps=function(e){this.stopUpdate||(this.setState({apps:e}),u.appbaseService.setExtra("allApps",e))},t.prototype.createApp=function(e){var t=this;u.appbaseService.createApp(e).then(function(a){t.setState({createAppLoading:!1,clearInput:!0}),u.appbaseService.pushUrl("/dashboard/"+e.appname)}).catch(function(e){t.setState({createAppError:e.responseJSON,createAppLoading:!1}),console.log(e)})},t.prototype.timeAgo=function(e){return e&&e.lastAciveOn?C(e.lastAciveOn).fromNow():null},t.prototype.isShared=function(e){return!!(e&&u.appbaseService&&u.appbaseService.userInfo&&u.appbaseService.userInfo.body&&e.owner!==u.appbaseService.userInfo.body.email)},t.prototype.toggleShared=function(){var e=this.state.showShared;this.setState({showShared:!e})},t.prototype.renderElement=function(e){var t=this,a=null;switch(e){case"apps":a=this.state.apps.filter(function(e){return!!t.state.showShared||e.owner===u.appbaseService.userInfo.body.email}).map(function(e){var a={action:t.calcPercentage(e,"action"),records:t.calcPercentage(e,"records")},n=(0,i.default)({"with-owner":t.isShared(e)});return o.default.createElement(c.default,{key:e.id,setClassName:"col-md-4"},o.default.createElement("div",{className:"ad-list-app",onClick:function(){window.sessionStorage.setItem("currentCalls",e.api_calls),window.sessionStorage.setItem("currentRecords",e.records),u.appbaseService.pushUrl("/dashboard/"+e.appname)}},o.default.createElement("span",{className:"ad-list-app-bg-container"},o.default.createElement("i",{className:"ad-list-app-bg"})),o.default.createElement("div",{className:"ad-list-app-content"},o.default.createElement("header",{className:"ad-list-app-header "+n},o.default.createElement("div",{className:"ad-list-title-container"},o.default.createElement(h.AppOwner,{app:e}),o.default.createElement("h3",{className:"title"},e.appname))),o.default.createElement("div",{className:"description"},o.default.createElement("div",{className:"row clearfix ad-metrics-summary"},o.default.createElement("div",{className:"col-xs-6"},o.default.createElement("div",{className:"col-xs-12 p-0 progress-container"},o.default.createElement("span",{className:"progress-wrapper"},t.state.loading?o.default.createElement("div",{className:"animated-spinner"},o.default.createElement("i",{className:"fas fa-circle-notch fa-spin"})):o.default.createElement(s.Circle,{percent:a.action.percentage,strokeWidth:"10",trailWidth:"10",trailColor:t.trailColor,strokeColor:t.themeColor})),o.default.createElement("div",{className:"progress-text"},o.default.createElement("div",{className:"sub-title"},"API calls"),t.state.loading?o.default.createElement("div",null,"Loading..."):o.default.createElement("div",null,o.default.createElement("strong",null,f.common.compressNumber(a.action.count))," / ",o.default.createElement("span",null,f.common.compressNumber(d.billingService.planLimits[t.state.plan].action)))))),o.default.createElement("div",{className:"col-xs-6"},o.default.createElement("div",{className:"col-xs-12 p-0 progress-container"},o.default.createElement("span",{className:"progress-wrapper"},t.state.loading?o.default.createElement("div",{className:"animated-spinner"},o.default.createElement("i",{className:"fas fa-circle-notch fa-spin"})):o.default.createElement(s.Circle,{percent:a.records.percentage,strokeWidth:"10",trailWidth:"10",trailColor:t.trailColor,strokeColor:t.themeColor})),o.default.createElement("div",{className:"progress-text"},o.default.createElement("div",{className:"sub-title"},"Records"),t.state.loading?o.default.createElement("div",null,"Loading..."):o.default.createElement("div",null,o.default.createElement("strong",null,f.common.compressNumber(a.records.count))," / ",o.default.createElement("span",null,f.common.compressNumber(d.billingService.planLimits[t.state.plan].records)))))))),o.default.createElement(p.default,{app:e,deleteApp:t.deleteApp}))))})}return a},t.prototype.render=function(){return new Date(u.appbaseService.profileCheckDate)<new Date((0,w.default)(u.appbaseService.userInfo,["body","created_at"]))&&""===(0,w.default)(u.appbaseService.userInfo,["body","deployment-timeframe"])?o.default.createElement(E.default,{description:"While we're creating your account, can you take a minute to answer these questions?",forceUpdate:function(){return u.appbaseService.pushUrl("/tutorial")}}):o.default.createElement("div",{className:"ad-list"},u.appbaseService.userInfo?o.default.createElement("div",null,o.default.createElement("header",{className:"ad-list-header row"},o.default.createElement("div",{className:"container flexcontainer"},o.default.createElement(A,{setClassName:"hidden-xs",name:u.appbaseService.userInfo.body.details.name}),o.default.createElement(_,{setClassName:"hidden-xs hidden-sm"}),o.default.createElement(l.default,{createApp:this.createApp,apps:this.state.apps,createAppLoading:this.state.createAppLoading,createAppError:this.state.createAppError,clearInput:this.state.clearInput}))),o.default.createElement("div",{className:"ad-list-container container"},o.default.createElement(v.default,{apps:this.state.apps,plan:this.state.plan}),o.default.createElement("div",{className:"ad-list-filters col-xs-12 p-0 text-right"},o.default.createElement(m.default,{apps:this.state.apps,registerApps:this.registerApps}),o.default.createElement(b.default,{registerApps:this.registerApps}),o.default.createElement(y.default,{registerApps:this.registerApps,toggleShared:this.toggleShared})),o.default.createElement("div",{style:{width:"calc(100% + 30px)"},className:"ad-list-apps row clearfix"},this.renderElement("apps")))):null)},t}(r.Component);t.default=N},436:function(e,t,a){"use strict";t.__esModule=!0;var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},r=a(1),o=function(e){return e&&e.__esModule?e:{default:e}}(r),s=a(510),i=a(39);var l=function(e){function t(a){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,a));return n.state={showModal:!!n.props.showModal&&n.props.showModal,validate:!1,inputValue:null},n.open=n.open.bind(n),n.onConfirm=n.onConfirm.bind(n),n.onCancel=n.onCancel.bind(n),n.handleInputChange=n.handleInputChange.bind(n),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.close=function(){this.props.onClose&&this.props.onClose(),this.setState({showModal:!1})},t.prototype.open=function(){this.props.onOpen&&this.props.onOpen(),this.setState({showModal:!0})},t.prototype.onConfirm=function(){this.props.onConfirm&&this.props.onConfirm(),this.close()},t.prototype.onCancel=function(){this.props.onCancel&&this.props.onCancel(),this.close()},t.prototype.getType=function(){return"modal-"+(this.props.type?this.props.type:"info")},t.prototype.handleInputChange=function(e){this.setState({inputValue:e.target.value,validate:e.target.value===this.props.info.validate.value})},t.prototype.render=function(){var e=this,t=o.default.Children.map(this.props.children,function(t){return o.default.cloneElement(t,{onClick:e.open})});return o.default.createElement("div",null,t,o.default.createElement(s.Modal,{className:this.getType(),show:this.state.showModal,onHide:function(){return e.close()}},o.default.createElement(s.Modal.Header,{closeButton:!0},this.props.info&&this.props.info.title?o.default.createElement(s.Modal.Title,null,this.props.info.title):null),o.default.createElement(s.Modal.Body,{className:"clearfix"},o.default.createElement("div",{className:"row"},o.default.createElement("div",{className:"col-xs-12"},this.props.info.description),this.props.info&&this.props.info.validate?o.default.createElement("div",{className:"col-xs-12 form-group"},o.default.createElement("input",{placeholder:this.props.info.validate.placeholder,type:"text",className:"form-control",defaultValue:this.state.inputValue,onChange:this.handleInputChange})):null),o.default.createElement("div",{className:"col-xs-12 p-0"},this.props.info.buttons.confirm?o.default.createElement("button",n({className:"ad-theme-btn ad-confirm-btn"},i.common.isDisabled(this.props.info.validate&&!this.state.validate),{onClick:this.onConfirm}),this.props.info.buttons.confirm):null,this.props.info.buttons.cancel?o.default.createElement("button",{className:"ad-theme-btn ad-cancel-btn",onClick:this.onCancel},this.props.info.buttons.cancel):null))))},t}(r.Component);t.default=l,l.propTypes={},l.defaultProps={}},502:function(e,t,a){"use strict";t.__esModule=!0,t.billingService=void 0;var n=a(39),r=a(96);var o=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.address=r.ACC_API,this.billingAddress="https://transactions.appbase.io",this.planLimits={free:{action:1e5,records:1e4},bootstrap:{action:1e6,records:5e4},growth:{action:1e7,records:1e6}},this.prices={monthly:{bootstrap:29,growth:99,dedicated:499},annual:{bootstrap:19,growth:69,dedicated:299}}}return e.prototype.getCustomer=function(e){return n.$http.start({url:this.billingAddress+"/api/me",data:e,method:"POST"})},e.prototype.createCustomer=function(e){return n.$http.start({url:this.billingAddress+"/api/createCustomer",data:e,method:"POST"})},e.prototype.stripeConnect=function(e){return n.$http.start({url:this.billingAddress+"/api/stripeConnect",data:e,method:"POST"})},e.prototype.updateStripeCustomer=function(e){return n.$http.start({url:this.billingAddress+"/api/updateStripeCustomer",data:e,method:"POST"})},e.prototype.updateCustomer=function(e,t){return n.$http.start({url:this.billingAddress+"/api/updateCustomer/"+t,data:e,method:"POST"})},e.prototype.paymentInfo=function(e,t){return n.$http.start({url:this.billingAddress+"/api/paymentInfo",data:e,method:"POST"})},e.prototype.updateSubscribe=function(e){return n.$http.start({url:this.billingAddress+"/billing/subscribe",data:e,method:"PUT"})},e.prototype.cancelSubscription=function(e){return n.$http.start({url:this.billingAddress+"/billing/cancelSubscription",data:e,method:"POST"})},e.prototype.usage=function(e,t){var a=this.billingAddress+"/usage";return e&&t&&(a=this.billingAddress+"/usage?start="+e+"&end="+t),n.$http.start({url:a,method:"GET"})},e.prototype.calculator=function(){return n.$http.start({url:this.billingAddress+"/calculator",method:"GET"})},e}();t.billingService=new o},512:function(e,t,a){"use strict";t.__esModule=!0;var n=a(1),r=s(n),o=s(a(513));function s(e){return e&&e.__esModule?e:{default:e}}var i=function(e){function t(a){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,a));return n.getRef=n.getRef.bind(n),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.componentWillUnmount=function(){this.cp&&this.cp.destroy()},t.prototype.getRef=function(e){if(e){var t=e;this.cp&&this.cp.destroy(),this.cp=new o.default(t),this.cp.on("success",this.props.onSuccess),this.cp.on("error",this.props.onError)}},t.prototype.render=function(){var e=this,t=r.default.Children.map(this.props.children,function(t){return r.default.cloneElement(t,{ref:e.getRef})});return r.default.createElement("span",null,t)},t}(n.Component);t.default=i,i.propTypes={},i.defaultProps={}}}]);
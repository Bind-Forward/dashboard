(window.webpackJsonp=window.webpackJsonp||[]).push([[19],{1115:function(e,t,n){"use strict";t.__esModule=!0;var a=function(e){return e&&e.__esModule?e:{default:e}}(n(1)),r=n(1116);t.default=function(e){return e.show?a.default.createElement(r.Wrapper,null,a.default.createElement(r.Overlay,{onClick:e.onClose}),a.default.createElement("div",{className:"modal-wrapper"},e.children)):null}},1116:function(e,t,n){"use strict";t.__esModule=!0,t.Overlay=t.Wrapper=void 0;var a=function(e){return e&&e.__esModule?e:{default:e}}(n(342));t.Wrapper=(0,a.default)("div",{target:"ef1aeaw0"})("display:flex;flex-direction:column;align-items:center;justify-content:center;z-index:999;position:fixed;top:0;left:0;width:100%;height:100%;.modal-wrapper{width:100%;max-width:800px;height:auto;background-color:#fff;border-radius:3px;padding:25px 30px;position:relative;z-index:1;h3{font-size:20px;font-weight:600;margin:12px 0 20px;}}"),t.Overlay=(0,a.default)("div",{target:"ef1aeaw1"})("position:fixed;top:0;left:0;width:100%;height:100%;background-color:rgba(0,0,0,0.7);")},1145:function(e,t,n){"use strict";t.__esModule=!0,t.default={search:"Search",aggs:"Aggs",searchaggs:"Search & Aggs",none:"None"}},1146:function(e,t,n){"use strict";t.__esModule=!0,t.default={text:[],object:[],integer:["float","long","text"],long:["integer","text","float"],float:["integer","double","text"],double:["integer","float","text"],date:["text"],geo_point:["text"],geo_shape:["text"],boolean:["text"]}},1264:function(e,t,n){"use strict";t.__esModule=!0;var a=b(n(499)),r=b(n(364)),l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e};n(458),n(435);var i=n(1),o=b(i),s=n(0),d=b(n(1265)),u=b(n(1145)),c=n(396),p=n(594),f=b(n(1146)),g=b(n(595)),h=n(421),m=b(n(720)),y=b(n(1267)),x=b(n(734));function b(e){return e&&e.__esModule?e:{default:e}}var E=function(){return o.default.createElement("div",{style:{maxWidth:220}},"Names of the fields and nested-fields are represented with relative indentation.")},w=function(){return o.default.createElement("div",{style:{maxWidth:220}},"We detect the appropriate analyzers and mappings here representing the usecase - search or aggregations.")},v=function(){return o.default.createElement("div",{style:{maxWidth:220}},"Editing mappings isn","'","t a native feature in Elasticsearch. All appbase.io paid plans offer editable mappings by performing a lossless re-indexing of your data whenever you edit them from this UI.")},_=function(e){return o.default.createElement(m.default,{show:e.show,onClose:e.onClose},o.default.createElement("h3",null,"Re-index successful"),o.default.createElement("p",null,"The mappings have been updated and the data has been successfully re-indexed in ",e.timeTaken,"ms."),o.default.createElement("div",{style:{display:"flex",flexDirection:"row-reverse",margin:"10px 0"}},o.default.createElement(h.Button,{ghost:!0,onClick:e.onClose},"Done")))},k=function(e){function t(n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var i=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,n));return i.getType=function(e){return"string"===e?"text":e},i.getUsecase=function(e){var t=(0,p.hasAggs)(e),n=0;return e.search&&(n=1),t&&n?"searchaggs":!t&&n?"search":t&&!n?"aggs":"none"},i.setMapping=function(e,t,n){var a=(0,p.updateMapping)(i.state.mapping,e,t,n);i.setState({mapping:a,dirty:!0})},i.handleMapping=function(e){i.originalMapping=e,i.setState({isLoading:!1,mapping:e?(0,p.transformToES5)(e):e})},i.deletePath=function(e){var t=JSON.parse(JSON.stringify(i.state.mapping)),n=e.split(".");"properties"===n[n.length-1]&&(n=n.slice(0,-1)),n.reduce(function(e,t,a){return a===n.length-1?(delete e[t],!0):e[t]},t),i.setState({dirty:!0,mapping:t,deletedPaths:[].concat(i.state.deletedPaths,[e])})},i.cancelChanges=function(){i.setState({mapping:i.originalMapping,dirty:!1})},i.toggleModal=function(){i.setState({showModal:!i.state.showModal})},i.hideErrorModal=function(){i.setState({showError:!1,errorMessage:""})},i.addField=function(e){var t=e.name,n=e.type,a=e.usecase,r=JSON.parse(JSON.stringify(i.state.mapping)),o=t.split("."),s={};a&&(s=g.default[a]),o.reduce(function(e,t,a){return a===o.length-1?(e[t]=l({type:n},s),!0):(e[t]&&e[t].properties||(e[t]={properties:{}}),e[t].properties)},r),i.setState({dirty:!0,mapping:r})},i.reIndex=function(){i.setState({isLoading:!0});var e=i.state.deletedPaths.map(function(e){return e.split(".properties.").join(".")}).map(function(e){var t=e.indexOf(".")+1;return e.substring(t)});(0,p.reIndex)(i.state.mapping,i.props.appId,e).then(function(e){i.setState({showFeedback:!0,timeTaken:e})}).catch(function(e){i.setState({isLoading:!1,showError:!0,errorLength:Array.isArray(e)&&e.length,errorMessage:JSON.stringify(e,null,4)})})},i.renderUsecase=function(e,t){if("text"===e.type){var n=e.fields?i.getUsecase(e.fields,i.usecases):"none";return i.state.editable?o.default.createElement("select",{name:"field-usecase",defaultValue:n,className:h.dropdown,onChange:function(e){i.setMapping(t,"text",e.target.value)}},Object.entries(i.usecases).map(function(e){return o.default.createElement("option",{key:e[0],value:e[0]},e[1])})):o.default.createElement("span",{style:{boxShadow:"none",border:0},className:h.dropdown},i.usecases[n])}return null},i.renderMapping=function(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";return t?o.default.createElement("section",{key:e,className:h.row},o.default.createElement("h4",{className:h.title+" "+h.deleteBtn},o.default.createElement("span",{title:e},e),i.state.editable?o.default.createElement("a",{onClick:function(){i.deletePath(a)}},o.default.createElement("i",{className:"fas fa-trash-alt"})):null),Object.keys(t).map(function(e){return t[e].properties?i.renderMapping(e,t[e].properties,n[e].properties,(a?a+".":"")+e+".properties"):o.default.createElement("div",{key:e,className:h.item},o.default.createElement("div",{className:h.deleteBtn},o.default.createElement("span",{title:e},e),i.state.editable?o.default.createElement("a",{onClick:function(){i.deletePath(a+"."+e)}},o.default.createElement("i",{className:"fas fa-trash-alt"})):null),o.default.createElement("div",{className:h.subItem},i.renderUsecase(t[e],e),i.state.editable?o.default.createElement("select",{className:h.dropdown,name:e+"-mapping",defaultValue:t[e].type,onChange:function(t){i.setMapping(e,t.target.value)}},n[e]?o.default.createElement("option",{value:i.getType(n[e].type)},i.getType(n[e].type)):o.default.createElement("option",{value:i.getType(t[e].type)},i.getType(t[e].type)),n[e]?f.default[i.getType(n[e].type)].map(function(e){return o.default.createElement("option",{key:e,value:i.getType(e)},i.getType(e).split("_").join(" "))}):f.default[i.getType(t[e].type)].map(function(e){return o.default.createElement("option",{key:e,value:i.getType(e)},i.getType(e).split("_").join(" "))})):o.default.createElement("span",{style:{boxShadow:"none",border:0},className:h.dropdown},t[e].type)))})):null},i.renderPromotionalButtons=function(){return i.props.url?o.default.createElement("div",{style:{display:"flex",flexDirection:"row",alignItems:"center"}},o.default.createElement("p",{style:{margin:"0 8px 0 0",color:"#888"}},"Get an appbase.io account to edit mappings",o.default.createElement(a.default,{title:v},o.default.createElement("span",null,o.default.createElement(r.default,{type:"info-circle"})))),o.default.createElement(h.Button,{href:"https://appbase.io",target:"_blank"},"Signup Now")):o.default.createElement("div",{style:{display:"flex",flexDirection:"row",alignItems:"center"}},o.default.createElement("p",{style:{margin:"0 8px 0 0",color:"#888"}},"Upgrade your plan to edit mappings",o.default.createElement(a.default,{title:v},o.default.createElement("span",null,o.default.createElement(r.default,{type:"info-circle"})))),o.default.createElement(h.Button,{href:"/billing",target:"_blank"},"Upgrade Now"))},i.state={mapping:null,dirty:!1,showModal:!1,isLoading:!0,errorMessage:"",showError:!1,errorLength:0,deletedPaths:[],editable:!1,loadingError:null,showFeedback:!1,timeTaken:"0"},i.usecases=u.default,i.originalMapping=null,i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.componentDidMount=function(){var e=this;this.props.url?(0,p.getMappings)(this.props.appName,this.props.credentials,this.props.url).then(this.handleMapping).catch(function(t){e.setState({loadingError:t,isLoading:!1})}):((0,c.checkUserStatus)().then(function(t){t.isPaidUser&&e.setState({editable:!0})}).catch(function(){e.setState({editable:!1})}),(0,c.getCredentials)(this.props.appId).then(function(t){var n=t.username,a=t.password;return(0,p.getMappings)(e.props.appName,n+":"+a)}).then(this.handleMapping).catch(function(t){console.error(t),e.setState({mappingsError:t,showError:!0,isLoading:!1})}))},t.prototype.render=function(){var e=this;return this.state.loadingError?o.default.createElement("p",{style:{padding:20}},this.state.loadingError):this.state.isLoading&&!this.state.mapping?o.default.createElement(d.default,{show:!0,message:"Fetching mappings... Please wait!"}):this.state.mappingsError?o.default.createElement(x.default,{show:this.state.showError,message:"Some error occured while fetching the mappings",error:JSON.stringify(this.state.mappingsError,null,2),onClose:this.hideErrorModal}):o.default.createElement("div",{className:h.card},o.default.createElement("div",{style:{borderBottom:"1px solid #eee",padding:20,display:"flex",alignItems:"center",justifyContent:"space-between"}},o.default.createElement(h.HeaderWrapper,null,o.default.createElement("h2",{className:h.heading},"Manage Mappings"),o.default.createElement("p",null,"Add new fields or change the types of existing ones.")),this.state.editable?o.default.createElement(h.Button,{ghost:!0,onClick:this.toggleModal},"Add New Field"):this.renderPromotionalButtons()),o.default.createElement("div",{style:{padding:"5px 20px"}},o.default.createElement(h.Header,null,o.default.createElement("span",null,"Field Name",o.default.createElement(a.default,{title:E},o.default.createElement("span",null,o.default.createElement(r.default,{type:"info-circle"})))),o.default.createElement("div",null,o.default.createElement("span",{className:"col"},"Use case",o.default.createElement(a.default,{title:w},o.default.createElement("span",null,o.default.createElement(r.default,{type:"info-circle"})))),o.default.createElement("span",{className:"col"},"Data Type"))),Object.keys(this.state.mapping).map(function(t){if(e.state.mapping[t]){var n=e.state.mapping[t].properties,a=e.originalMapping[t]?e.originalMapping[t].properties:e.state.mapping[t].properties;return e.renderMapping(t,n,a,t+".properties")}return null})),this.state.dirty&&this.state.editable?o.default.createElement(h.Footer,null,o.default.createElement(h.Button,{onClick:this.reIndex},"Confirm Mapping Changes"),o.default.createElement(h.Button,{ghost:!0,onClick:this.cancelChanges},"Cancel")):null,o.default.createElement(y.default,{types:Object.keys(this.state.mapping).filter(function(e){return!p.REMOVED_KEYS.includes(e)}),show:this.state.showModal,addField:this.addField,onClose:this.toggleModal,deletedPaths:this.state.deletedPaths}),o.default.createElement(d.default,{show:this.state.isLoading,message:"Re-indexing your data... Please wait!"}),o.default.createElement(x.default,{show:this.state.showError,errorLength:this.state.errorLength,error:this.state.errorMessage,onClose:this.hideErrorModal}),o.default.createElement(_,{show:this.state.showFeedback,timeTaken:this.state.timeTaken,onClose:function(){return window.location.reload()}}))},t}(i.Component);t.default=k,k.propTypes={appId:s.string,appName:s.string.isRequired,credentials:s.string,url:s.string}},1265:function(e,t,n){"use strict";t.__esModule=!0;var a=function(e){return e&&e.__esModule?e:{default:e}}(n(1266));t.default=a.default},1266:function(e,t,n){"use strict";t.__esModule=!0;var a=r(n(1));function r(e){return e&&e.__esModule?e:{default:e}}var l=(0,r(n(342)).default)("div",{target:"eermln60"})("position:fixed;top:0;left:0;width:100%;height:100%;background-color:rgba(0,0,0,0.7);z-index:999;color:#fff;display:flex;padding:20px;flex-direction:column;align-items:center;justify-content:center;font-size:16px;letter-spacing:0.04rem;font-weight:300;");t.default=function(e){return e.show?a.default.createElement(l,null,a.default.createElement("p",null,e.message||"Loading...")):null}},1267:function(e,t,n){"use strict";t.__esModule=!0;var a=g(n(459)),r=g(n(499)),l=g(n(364)),i=g(n(584)),o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e};n(536),n(458),n(435),n(596);var s=n(1),d=g(s),u=g(n(720)),c=n(421),p=g(n(1146)),f=g(n(1145));function g(e){return e&&e.__esModule?e:{default:e}}var h=function(){return d.default.createElement("div",{style:{maxWidth:250}},"Add a nested field by using the dot (.) notation, e.g. foo.bar will create a mapping like:",d.default.createElement("pre",{style:{marginTop:5,padding:10,backgroundColor:"#eee"}},"foo: {\n    bar: { ... }\n}"))},m=function(){return d.default.createElement("div",{style:{maxWidth:250}},"Based on the primary use case, whether search or aggregations, we will add the appropriate analyzers, mappings to ensure best results when performing the action")},y=function(e){function t(n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,n));return a.getInitialState=function(){return{esType:a.props.types[0]||"",name:"",usecase:"search",type:"text",error:""}},a.handleEsTypeChange=function(e){a.setState({esType:e,fieldType:e})},a.handleNewFieldChange=function(e){var t,n=e.target,r=n.name,l=n.value;a.setState(o({},a.state.new,((t={})[r]=l,t)))},a.addField=function(){var e=a.state,t=e.esType,n=e.name,r=e.usecase,l=e.type,i=a.props.deletedPaths.map(function(e){return e.split(".properties.").join(".")}),o=t+"."+n;n&&i.includes(o)?a.setState({error:"You're trying to add a field which you just deleted. This will result in loss of data."}):n?(a.props.addField({name:o,type:l,usecase:"text"===l?r:null}),a.setState(function(){return a.getInitialState()}),a.props.onClose()):(a.input.current.focus(),a.setState({error:"Please enter a valid field name"}))},a.usecases=f.default,a.input=d.default.createRef(),a.state=a.getInitialState(),a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.render=function(){var e=this,t=this.state,n=t.fieldType,o=(t.esType,d.default.createElement(i.default,{onClick:function(t){return e.handleEsTypeChange(t.key)}},this.props.types.map(function(e){return d.default.createElement(i.default.Item,{key:e},e)}),n&&!this.props.types.includes(n)?d.default.createElement(i.default.Item,{key:n},"Create type "+n):null));return d.default.createElement(u.default,{show:this.props.show,onClose:this.props.onClose},d.default.createElement("h3",null,"Add New Field"),d.default.createElement("section",null,d.default.createElement(c.Header,null,d.default.createElement("span",{className:"col"},"Type"),d.default.createElement("span",{className:"col col--grow"},"Field Name",d.default.createElement(r.default,{title:h},d.default.createElement("span",null,d.default.createElement(l.default,{type:"info-circle"})))),"text"===this.state.type?d.default.createElement("span",{className:"col"},"Use case",d.default.createElement(r.default,{title:m},d.default.createElement("span",null,d.default.createElement(l.default,{type:"info-circle"})))):null,d.default.createElement("span",{className:"col"},"Data Type")),d.default.createElement("div",{style:{padding:"10px 0",display:"flex"}},d.default.createElement("span",{style:{width:150,marginRight:12}},d.default.createElement(a.default,{overlay:o},d.default.createElement(c.Input,{type:"text",name:"fieldType",value:this.state.fieldType,placeholder:"Select or Create Type",defaultValue:this.state.esType,onChange:this.handleNewFieldChange}))),d.default.createElement(c.Input,{ref:this.input,type:"text",name:"name",placeholder:"Enter field name",value:this.state.name,onChange:this.handleNewFieldChange}),"text"===this.state.type?d.default.createElement("select",{className:c.dropdown,name:"usecase",defaultValue:this.state.usecase,onChange:this.handleNewFieldChange},Object.entries(this.usecases).map(function(e){return d.default.createElement("option",{key:e[0],value:e[0]},e[1])})):null,d.default.createElement("select",{className:c.dropdown,name:"type",defaultValue:this.state.type,onChange:this.handleNewFieldChange},Object.keys(p.default).filter(function(e){return"object"!==e}).map(function(e){return d.default.createElement("option",{key:e,value:e},e.split("_").join(" "))}))),this.state.error?d.default.createElement("p",{style:{color:"tomato"}},this.state.error):null,d.default.createElement("div",{style:{display:"flex",flexDirection:"row-reverse",margin:"10px 0"}},d.default.createElement(c.Button,{onClick:this.addField},"Add Field"))))},t}(s.Component);t.default=y},333:function(e,t,n){"use strict";t.__esModule=!0;var a=function(e){return e&&e.__esModule?e:{default:e}}(n(1264));t.default=a.default},396:function(e,t,n){"use strict";t.__esModule=!0,t.getCredentials=function(e){return new Promise(function(t,n){fetch(a+"/app/"+e+"/permissions",{method:"GET",credentials:"include",headers:{"Content-Type":"application/json"}}).then(function(e){return e.json()}).then(function(e){var n=e.body.find(function(e){return e.read&&e.write&&e.referers.includes("*")&&e.include_fields.includes("*")});n||(n=e.body.find(function(e){return e.read&&e.write&&e.referers.includes("*")})),n||(n=e.body.find(function(e){return e.read&&e.write})),n||(n=e.body.find(function(e){return e.read})),t(n)}).catch(function(e){n(e)})})},t.checkUserStatus=function(){return new Promise(function(e,t){fetch(a+"/user",{method:"GET",credentials:"include",headers:{"content-type":"application/json"}}).then(function(e){return e.json()}).then(function(e){return e.body.c_id?e.body.c_id:(t(),null)}).then(l).then(function(e){return e.json()}).then(function(t){t.plan&&"free"!==t.plan||e({isPaidUser:!1,plan:"free"}),e({isPaidUser:!0,plan:t.plan})}).catch(function(){t()})})};var a=t.ACC_API="https://accapi.appbase.io",r=(t.SCALR_API="https://scalr.api.appbase.io",t.BILLING_API="https://transactions.appbase.io");function l(e){return fetch(r+"/api/me",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({c_id:e})})}},421:function(e,t,n){"use strict";t.__esModule=!0,t.ErrorLogger=t.Input=t.deleteBtn=t.Button=t.Footer=t.subItem=t.item=t.dropdown=t.title=t.row=t.heading=t.Header=t.HeaderWrapper=t.card=void 0;var a=n(342),r=function(e){return e&&e.__esModule?e:{default:e}}(a);t.card=(0,a.css)("width:100%;max-width:980px;margin:25px auto;background-color:#fff;border-radius:3px;box-shadow:0 3px 5px 0 rgba(0,0,0,0.05);box-sizing:border-box;i{margin:3px 3px 0px 8px;}"),t.HeaderWrapper=(0,r.default)("div",{target:"e1tvtz600"})("display:flex;flex-direction:column;align-items:flex-start;justify-content:center;p{font-size:13px;margin:6px 0 0;color:#999;}"),t.Header=(0,r.default)("header",{target:"e1tvtz601"})("display:flex;flex-direction:row;justify-content:space-between;font-weight:600;padding-top:20px;.col{min-width:150px;display:inline-flex;margin:0 0 0 12px;text-align:center;&:first-child{margin:0;}&.col--grow{flex-grow:1;}}"),t.heading=(0,a.css)("font-size:16px;letter-spacing:0.015rem;font-weight:600;margin:0;padding:0;"),t.row=(0,a.css)("box-sizing:border-box;background-color:rgba(0,0,0,0.02);padding:15px 0 15px 15px;margin:15px 0;border:1px solid rgba(0,0,0,0.05);"),t.title=(0,a.css)("font-size:15px;letter-spacing:0.015rem;font-weight:600;margin:0 0 12px 0;padding:0;"),t.dropdown=(0,a.css)("width:auto;min-width:150px;height:34px;border:1px solid #f8f8f8;box-shadow:0 3px 5px 0 rgba(0,0,0,0.05);background-color:#fff;border-radius:2px;outline-color:#c7f4ff;margin-left:12px;padding:6px 15px 6px 6px;text-transform:capitalize;"),t.item=(0,a.css)("display:flex;flex-direction:row;justify-content:space-between;padding:10px;margin-bottom:2px;align-items:center;background-color:rgba(255,255,255,0.8);"),t.subItem=(0,a.css)("display:flex;flex-direction:row;align-items:center;"),t.Footer=(0,r.default)("footer",{target:"e1tvtz602"})("position:sticky;bottom:0;width:100%;height:66px;box-shadow:0 -3px 5px 0 rgba(0,0,0,0.02);background-color:#fff;transition:all .3s ease;border-bottom-left-radius:3px;border-bottom-right-radius:3px;padding:0 20px;display:flex;flex-direction:row-reverse;align-items:center;"),t.Button=(0,r.default)("a",{target:"e1tvtz603"})("display:inline-flex;height:42px;padding:0 20px;justify-content:center;align-items:center;color:#53683b;font-weight:600;background-color:",function(e){return e.ghost?"#efefef":"#b6ef7e"},";;text-transform:uppercase;box-shadow:0 3px 3px 0 rgba(0,0,0,0.1);cursor:pointer;margin-left:12px;&:hover,&:focus{background-color:",function(e){return e.ghost?"#fafafa":"#c3f295"},";box-shadow:0 5px 5px 0 rgba(0,0,0,0.1);text-decoration:none;}"),t.deleteBtn=(0,a.css)("display:flex;flex-grow:1;alignItems:center;flex-direction:row;cursor:pointer;span{max-width:calc(100% - 40px);white-space:nowrap;overflow:hidden;text-overflow:ellipsis;}a{display:none;cursor:pointer;color:#444;margin-left:15px;transition:all .3s ease;}&:hover a,&:focus a{display:inline;&:hover,&:focus{color:#222;}}"),t.Input=(0,r.default)("input",{target:"e1tvtz604"})("diplay:flex;flex-grow:1;min-width:150px;height:34px;border:1px solid #f8f8f8;box-shadow:0 3px 5px 0 rgba(0,0,0,0.05);background-color:#fff;border-radius:2px;outline-color:#c7f4ff;padding:5px;"),t.ErrorLogger=(0,r.default)("pre",{target:"e1tvtz605"})("height:auto;max-height:200px;overflow-y:scroll;width:100%;background-color:#eee;padding:10px;font-family:monospace;font-size:14px;")},594:function(e,t,n){"use strict";t.__esModule=!0,t.REMOVED_KEYS=void 0;var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e};t.getMappings=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:o.SCALR_API;return new Promise(function(a,l){fetch(n+"/"+e+"/_mapping",{method:"GET",headers:r({},function(e){if(e)return{Authorization:"Basic "+btoa(e)};return{}}(t),{"Content-Type":"application/json"})}).then(function(e){return e.json()}).then(function(t){var n=Object.keys(t[e].mappings).filter(function(e){return!u.includes(e)}),l={};n.forEach(function(n){var a;l=r({},l,((a={})[n]=t[e].mappings[n],a))}),a(l)}).catch(function(e){l(e)})})},t.reIndex=function(e,t,n){var a={mappings:e,settings:i.default,exclude_fields:n,es_version:"5"};return new Promise(function(e,n){fetch(o.ACC_API+"/app/"+t+"/reindex",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)}).then(function(e){return e.json()}).then(function(t){t.error&&n(t.error),t.body&&t.body.response_info.failures.length&&n(t.body.response_info.failures),"App has been successfully reindexed."!==t.message&&n(t.message),e(t.body.response_info.took)}).catch(function(e){n(e)})})},t.hasAggs=c,t.transformToES5=function e(t){var n=r({},t);Object.keys(n).every(function(t){if(d.includes(t))return!1;if("string"===n[t].type){var i,o=!!n[t].fields,s=r({},n[t]);o&&(n[t].fields.search?s=l.default.search:c(n[t].field)&&(s=l.default.aggs)),n=r({},n,((i={})[t]=r({},s,{type:"text"}),i))}else if("object"===a(n[t])&&!Array.isArray(n[t])){var u;n=r({},n,((u={})[t]=r({},n[t],e(n[t])),u))}return!0});return n},t.updateMapping=function e(t,n,i,o){var s=r({},t);Object.keys(s).every(function(t){if(d.includes(t))return!1;if(t===n){var u,c={};o&&(c=l.default[o]),s=r({},s,((u={})[t]=r({},c,{type:i}),u))}else if("object"===a(s[t])&&!Array.isArray(s[t])){var p;s=r({},s,((p={})[t]=r({},s[t],e(s[t],n,i,o)),p))}return!0});return s},t.traverseMapping=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n={};return Object.keys(e).forEach(function(a){return function(e,a){n[a]=[],function e(r){var l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";r.properties&&Object.keys(r.properties).forEach(function(i){t||n[a].push(""+l+i);var o=r.properties[i];o&&o.properties?e(o,""+l+i+"."):t&&n[a].push(""+l+i)})}(e)}(e[a],a)}),n},t.getMappingsTree=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={};return Object.keys(e).forEach(function(n){e[n].properties&&(t=r({},t,function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a={};return Object.keys(t).forEach(function(l){if(t[l].properties)a=r({},a,e(t[l].properties,l));else{var i,o=t[l].fields;a=r({},a,((i={})[(n?n+".":"")+l]={type:t[l].type,fields:t[l].fields?Object.keys(t[l].fields):[],originalFields:o||{}},i))}}),a}(e[n].properties,null)))}),t};var l=s(n(595)),i=s(n(633)),o=n(396);function s(e){return e&&e.__esModule?e:{default:e}}var d=["meta"],u=t.REMOVED_KEYS=["~logs","~percolator",".logs",".percolator","_default_"];function c(e){if(!e)return!1;var t=!1;return Object.keys(e).forEach(function(n){("keyword"===e[n].type||"string"===e[n].type&&"not_analyzed"===e[n].index)&&(t=!0)}),t}},595:function(e,t,n){"use strict";t.__esModule=!0,t.default={aggs:{fields:{keyword:{type:"keyword"}},analyzer:"standard",search_analyzer:"standard"},search:{fields:{search:{type:"text",index:"analyzed",analyzer:"ngram_analyzer",search_analyzer:"simple"},autosuggest:{type:"text",index:"analyzed",analyzer:"autosuggest_analyzer",search_analyzer:"simple"}},analyzer:"standard",search_analyzer:"standard"},searchaggs:{fields:{keyword:{type:"keyword",index:"not_analyzed"},search:{type:"text",index:"analyzed",analyzer:"ngram_analyzer",search_analyzer:"simple"},autosuggest:{type:"text",index:"analyzed",analyzer:"autosuggest_analyzer",search_analyzer:"simple"}},analyzer:"standard",search_analyzer:"standard"},none:{}}},633:function(e,t,n){"use strict";t.__esModule=!0,t.default={analysis:{analyzer:{autosuggest_analyzer:{filter:["lowercase","asciifolding","autosuggest_filter"],tokenizer:"standard",type:"custom"},ngram_analyzer:{filter:["lowercase","asciifolding","ngram_filter"],tokenizer:"standard",type:"custom"}},filter:{autosuggest_filter:{max_gram:"20",min_gram:"1",token_chars:["letter","digit","punctuation","symbol"],type:"edge_ngram"},ngram_filter:{max_gram:"9",min_gram:"2",token_chars:["letter","digit","punctuation","symbol"],type:"ngram"}}}}},720:function(e,t,n){"use strict";t.__esModule=!0;var a=function(e){return e&&e.__esModule?e:{default:e}}(n(1115));t.default=a.default},734:function(e,t,n){"use strict";t.__esModule=!0;var a=i(n(1)),r=i(n(720)),l=n(421);function i(e){return e&&e.__esModule?e:{default:e}}var o=function(e){return a.default.createElement(r.default,{show:e.show,onClose:e.onClose},a.default.createElement("h3",null,e.errorLength?e.errorLength+" records failed to index":"An error occured"),e.message?a.default.createElement("p",null,e.message):a.default.createElement("p",null,"To prevent data loss, we have restored your original mappings. You can fix"," ",e.errorLength?"these":"this"," and retry."),e.error?a.default.createElement(l.ErrorLogger,null,e.error):null,a.default.createElement("div",{style:{display:"flex",flexDirection:"row-reverse",margin:"10px 0"}},a.default.createElement(l.Button,{ghost:!0,onClick:e.onClose},"Close")))};o.displayName="ErrorModal",t.default=o}}]);
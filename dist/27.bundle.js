(window.webpackJsonp=window.webpackJsonp||[]).push([[27],{1109:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=function(e){return e&&e.__esModule?e:{default:e}}(a(1554)).default;t.default=n},1131:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default={search:"Search",aggs:"Aggs",searchaggs:"Search & Aggs",none:"None"}},1132:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default={text:[],object:[],integer:["float","long","text"],long:["integer","text","float"],float:["integer","double","text"],double:["integer","float","text"],date:["text"],geo_point:["text"],geo_shape:["text"],boolean:["text"]}},1550:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=function(e){return e&&e.__esModule?e:{default:e}}(a(1551)).default;t.default=n},1551:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=a(36);a(75);var l=m(a(21));a(546);var i=m(a(14));a(592);var r=m(a(577));a(600);var s=m(a(579)),o=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,a):{};n.get||n.set?Object.defineProperty(t,a,n):t[a]=e[a]}return t.default=e,t}(a(1)),d=a(0),p=a(129),u=m(a(51)),c=m(a(654)),f=m(a(1552)),h=a(320);function m(e){return e&&e.__esModule?e:{default:e}}const g=({appName:e,appId:t,isPaidUser:a,isUsingTrial:d,trialValidity:p})=>o.default.createElement(o.Fragment,null,o.default.createElement(c.default,{compact:!0},o.default.createElement(r.default,{type:"flex",justify:"space-between",gutter:16},o.default.createElement(s.default,{lg:18},o.default.createElement("h2",null,"Manage Mappings"),o.default.createElement(r.default,null,o.default.createElement(s.default,{lg:18},o.default.createElement("p",null,"View mappings, edit use-case and data types, add or delete fields -"," ",o.default.createElement("a",{href:"https://docs.appbase.io/concepts/mappings.html",target:"_blank",rel:"noopener noreferrer"},"learn more"),".")))),a?d?o.default.createElement(s.default,{lg:6,className:(0,n.css)({display:"flex",flexDirection:"column-reverse",paddingBottom:20})},o.default.createElement(l.default,{size:"large",type:"primary",href:"https://appbase.io/pricing",target:"_blank",rel:"noopener noreferrer"},o.default.createElement(i.default,{type:"info-circle"}),"Upgrade Now"),o.default.createElement("p",{className:(0,n.css)({marginTop:20,fontSize:13,textAlign:"center",lineHeight:"20px"})},o.default.createElement("strong",null,"Trial expires in ",p," ",p>1?"days":"day"))):null:o.default.createElement(s.default,{lg:6,className:(0,n.css)({display:"flex",flexDirection:"column-reverse",paddingBottom:20})},o.default.createElement(l.default,{size:"large",type:"primary",href:"https://appbase.io/pricing#features",target:"_blank",rel:"noopener noreferrer"},o.default.createElement(i.default,{type:"info-circle"}),"Requires A Paid Plan")))),o.default.createElement("section",null,o.default.createElement(f.default,{key:e,appName:e,appId:t})));g.propTypes={appName:d.string.isRequired,appId:d.string.isRequired,isPaidUser:d.bool.isRequired,isUsingTrial:d.bool.isRequired,trialValidity:d.number.isRequired};var y=(0,p.connect)(e=>{const t=(0,h.getAppPlanByName)(e);return{isUsingTrial:(0,u.default)(e,"$getUserPlan.trial")||!1,isPaidUser:(0,u.default)(t,"isPaid")||!1,trialValidity:(0,u.default)(e,"$getUserPlan.daysLeft")}})(g);t.default=y},1552:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=function(e){return e&&e.__esModule?e:{default:e}}(a(1553)).default;t.default=n},1553:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a(328);var n=v(a(133));a(546);var l=v(a(14));a(17),a(593),a(347),a(337);var i=v(a(340)),r=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,a):{};n.get||n.set?Object.defineProperty(t,a,n):t[a]=e[a]}return t.default=e,t}(a(1)),s=a(0),o=v(a(51)),d=a(129),p=v(a(936)),u=v(a(1131)),c=a(64),f=a(149),h=v(a(1132)),m=v(a(359)),g=a(320),y=a(329),x=a(791),b=v(a(1109)),w=v(a(1556)),E=v(a(1557));function v(e){return e&&e.__esModule?e:{default:e}}function M(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const O=i.default.TextArea,P=()=>r.default.createElement("div",{style:{maxWidth:220}},"Names of the fields and nested-fields are represented with relative indentation."),j=()=>r.default.createElement("div",{style:{maxWidth:220}},"We detect the appropriate analyzers and mappings here representing the usecase - search or aggregations."),_=()=>r.default.createElement("div",{style:{maxWidth:220}},"Editing mappings isn","'","t a native feature in Elasticsearch. All appbase.io paid plans offer editable mappings by performing a lossless re-indexing of your data whenever you edit them from this UI."),S=()=>r.default.createElement("div",{style:{maxWidth:220}},"Editing synonyms isn","'","t a native feature in Elasticsearch. All appbase.io paid plans offer editable synonym."),N=({show:e,onClose:t,timeTaken:a})=>r.default.createElement(b.default,{show:e,onClose:t},r.default.createElement("h3",null,"Re-index successful"),r.default.createElement("p",null,"The mappings have been updated and the data has been successfully re-indexed in"," ",a,"ms."),r.default.createElement("div",{style:{display:"flex",flexDirection:"row-reverse",margin:"10px 0"}},r.default.createElement(x.Button,{ghost:!0,onClick:t},"Done")));class C extends r.Component{constructor(e){super(e),M(this,"initializeSynonymsData",()=>{const e=this.props.appbaseCredentials;this.fetchSynonyms(e).then(e=>{this.setState({synonyms:e})})}),M(this,"getType",e=>"string"===e?"text":e),M(this,"getUsecase",e=>{const t=(0,f.hasAggs)(e);let a=0;return e.search&&(a=1),t&&a?"searchaggs":!t&&a?"search":t&&!a?"aggs":"none"}),M(this,"setMapping",(e,t,a)=>{const n=this.state.mapping,l=(0,f.updateMapping)(n,e,t,a);this.setState({mapping:l,dirty:!0})}),M(this,"handleMapping",e=>{this.originalMapping=e,this.setState({isLoading:!1,mapping:e?(0,f.transformToES5)(e):e})}),M(this,"handleSynonymModal",()=>{this.setState({showSynonymModal:!this.state.showSynonymModal})}),M(this,"deletePath",e=>{const t=JSON.parse(JSON.stringify(this.state.mapping));let a=e.split(".");"properties"===a[a.length-1]&&(a=a.slice(0,-1)),a.reduce((e,t,n)=>n===a.length-1?(delete e[t],!0):e[t],t),this.setState({dirty:!0,mapping:t,deletedPaths:[...this.state.deletedPaths,e]})}),M(this,"cancelChanges",()=>{this.setState({mapping:this.originalMapping,dirty:!1})}),M(this,"toggleModal",()=>{this.setState({showModal:!this.state.showModal})}),M(this,"hideErrorModal",()=>{this.setState({showError:!1,errorMessage:""})}),M(this,"handleChange",e=>{const t=e.target,a=t.name,n=t.value;this.setState({[a]:n})}),M(this,"fetchSynonyms",e=>{const t=this.props,a=t.url,n=t.appName;return(0,f.getSettings)(n,e,a).then(e=>{if((0,o.default)(e[n],"settings.index")){const t=e[n].settings.index;return t.analysis&&t.analysis.filter.synonyms_filter?t.analysis.filter.synonyms_filter.synonyms.join("\n"):""}return""})}),M(this,"addField",({name:e,type:t,usecase:a})=>{const n=JSON.parse(JSON.stringify(this.state.mapping)),l=e.split(".");let i={};a&&(i=m.default[a]),l.reduce((e,a,n)=>n===l.length-1?(e[a]=function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{},n=Object.keys(a);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(a).filter(function(e){return Object.getOwnPropertyDescriptor(a,e).enumerable}))),n.forEach(function(t){M(e,t,a[t])})}return e}({type:t},i),!0):(e[a]&&e[a].properties||(e[a]={properties:{}}),e[a].properties),n),this.setState({dirty:!0,mapping:n})}),M(this,"reIndex",()=>{this.setState({isLoading:!0});const e=this.state.deletedPaths.map(e=>e.split(".properties.").join(".")).map(e=>{const t=e.indexOf(".")+1;return e.substring(t)});(0,f.reIndex)(this.state.mapping,this.props.appId,e).then(e=>{this.setState({showFeedback:!0,timeTaken:e})}).catch(e=>{this.setState({isLoading:!1,showError:!0,errorLength:Array.isArray(e)&&e.length,errorMessage:JSON.stringify(e,null,4)})})}),M(this,"renderUsecase",(e,t)=>{if("text"===e.type){const a=e.fields?this.getUsecase(e.fields,this.usecases):"none";return this.state.editable?r.default.createElement("select",{name:"field-usecase",defaultValue:a,className:x.dropdown,onChange:e=>{this.setMapping(t,"text",e.target.value)}},Object.entries(this.usecases).map(e=>r.default.createElement("option",{key:e[0],value:e[0]},e[1]))):r.default.createElement("span",{style:{boxShadow:"none",border:0},className:x.dropdown},this.usecases[a])}return null}),M(this,"renderMapping",(e,t,a,n="")=>t?r.default.createElement("section",{key:e,className:x.row},r.default.createElement("h4",{className:`${x.title} ${x.deleteBtn}`},r.default.createElement("span",{title:e},e),this.state.editable?r.default.createElement("a",{onClick:()=>{this.deletePath(n)}},r.default.createElement(l.default,{type:"delete"})):null),Object.keys(t).map(e=>t[e].properties?this.renderMapping(e,t[e].properties,a[e].properties,`${n?`${n}.`:""}${e}.properties`):r.default.createElement("div",{key:e,className:x.item},r.default.createElement("div",{className:x.deleteBtn},r.default.createElement("span",{title:e},e),this.state.editable?r.default.createElement("a",{onClick:()=>{this.deletePath(`${n}.${e}`)}},r.default.createElement(l.default,{type:"delete"})):null),r.default.createElement("div",{className:x.subItem},this.renderUsecase(t[e],e),this.state.editable?r.default.createElement("select",{className:x.dropdown,name:`${e}-mapping`,defaultValue:t[e].type,onChange:t=>{this.setMapping(e,t.target.value)}},a[e]?r.default.createElement("option",{value:this.getType(a[e].type)},this.getType(a[e].type)):r.default.createElement("option",{value:this.getType(t[e].type)},this.getType(t[e].type)),a[e]?h.default[this.getType(a[e].type)].map(e=>r.default.createElement("option",{key:e,value:this.getType(e)},this.getType(e).split("_").join(" "))):h.default[this.getType(t[e].type)].map(e=>r.default.createElement("option",{key:e,value:this.getType(e)},this.getType(e).split("_").join(" ")))):r.default.createElement("span",{style:{boxShadow:"none",border:0},className:x.dropdown},t[e].type))))):null),M(this,"renderPromotionalButtons",(e,t)=>this.props.url?r.default.createElement("div",{className:x.promotionContainer},r.default.createElement("p",null,"Get an appbase.io account to edit ",e,r.default.createElement(n.default,{title:t},r.default.createElement("span",null,r.default.createElement(l.default,{type:"info-circle"})))),r.default.createElement(x.Button,{href:"https://appbase.io",target:"_blank"},"Signup Now")):r.default.createElement("div",{className:x.promotionContainer},r.default.createElement("p",{className:"promotional-info"},"Upgrade your plan to edit ",e,r.default.createElement(n.default,{title:t},r.default.createElement("span",null,r.default.createElement(l.default,{type:"info-circle"})))),r.default.createElement(x.Button,{href:"/billing",target:"_blank",className:"promotional-button"},"Upgrade Now"))),M(this,"updateSynonyms",()=>{const e=this.props.credentials||this.state.credentials,t=this.props.url,a=this.state.synonyms.split("\n").map(e=>e.split(",").map(e=>e.trim()).join(","));(0,f.closeIndex)(this.props.appName,e,t).then(()=>(0,f.updateSynonyms)(this.props.appName,e,t,a)).then(e=>e.acknowledged).then(t=>{t?this.fetchSynonyms(e).then(e=>this.setState({synonyms:e,showSynonymModal:!1})):this.setState({showSynonymModal:!1,showError:!0,errorMessage:"Unable to update Synonyms"})}).then(()=>(0,f.openIndex)(this.props.appName,e,t)).catch(()=>{(0,f.openIndex)(this.props.appName,e,t),this.setState({showSynonymModal:!1,showError:!0,errorMessage:"Unable to update Synonyms"})})}),this.state={mapping:null,dirty:!1,showModal:!1,isLoading:!0,errorMessage:"",showError:!1,errorLength:0,deletedPaths:[],editable:!1,showFeedback:!1,timeTaken:"0",synonyms:[],credentials:"",showSynonymModal:!1},this.usecases=u.default,this.originalMapping=null}static getDerivedStateFromProps(e,t){return e.isPaid&&!t.editable?{editable:!0}:null}componentDidMount(){this.init()}componentDidUpdate(e){const t=this.props,a=t.appName,n=t.appbaseCredentials,l=t.mapping,i=t.getAppMappings,r=t.isFetchingMapping;(0,c.isEqual)(e.mapping,l)||this.handleMapping(l),e.appName!==a&&this.init(),n&&e.appbaseCredentials!==n&&(r||i(a,n),this.initializeSynonymsData())}init(){const e=this.props,t=e.appName,a=e.appId,n=e.updateCurrentApp,l=e.getAppMappings,i=e.credentials,r=e.url,s=e.mapping,o=e.appbaseCredentials,d=e.isFetchingMapping;if(n(t,a),s&&!d)this.handleMapping(s),this.initializeSynonymsData();else if(r)l(t,i,r);else{const e=this.props.getPermission;o&&!s?l(t,o):o||e(t)}}render(){return this.props.loadingError?r.default.createElement("p",{style:{padding:20}},this.props.loadingError):!this.props.isFetchingMapping&&!this.state.isLoading||this.state.mapping?this.state.mappingsError?r.default.createElement(E.default,{show:this.state.showError,message:"Some error occured while fetching the mappings",error:JSON.stringify(this.state.mappingsError,null,2),onClose:this.hideErrorModal}):this.state.mapping?r.default.createElement(r.default.Fragment,null,r.default.createElement("div",{className:x.card},r.default.createElement("div",{className:"card-info"},r.default.createElement(x.HeaderWrapper,null,r.default.createElement("h2",{className:x.heading},"Manage Synonyms"),r.default.createElement("p",null,"Add new synonyms or edit the existing ones.")),this.state.editable?r.default.createElement(x.Button,{ghost:!0,onClick:this.handleSynonymModal,className:"card-button"},this.state.synonyms?"Edit":"Add"," Synonym"):this.renderPromotionalButtons("synonyms",S))),r.default.createElement("div",{className:x.card},r.default.createElement("div",{className:"card-info"},r.default.createElement(x.HeaderWrapper,null,r.default.createElement("h2",{className:x.heading},"Manage Mappings"),r.default.createElement("p",null,"Add new fields or change the types of existing ones.")),this.state.editable?r.default.createElement(x.Button,{ghost:!0,onClick:this.toggleModal,className:"card-button"},"Add New Field"):this.renderPromotionalButtons("mappings",_)),r.default.createElement("div",{style:{padding:"5px 20px"}},r.default.createElement(x.Header,null,r.default.createElement("span",null,"Field Name",r.default.createElement(n.default,{title:P},r.default.createElement("span",null,r.default.createElement(l.default,{type:"info-circle"})))),r.default.createElement("div",{className:"col-container"},r.default.createElement("span",{className:"col"},"Use case",r.default.createElement(n.default,{title:j},r.default.createElement("span",null,r.default.createElement(l.default,{type:"info-circle"})))),r.default.createElement("span",{className:"col"},"Data Type"))),this.state.mapping&&Object.keys(this.state.mapping).length?null:r.default.createElement("p",{style:{padding:"40px 0",color:"#999",textAlign:"center"}},"No data or mappings found"),Object.keys(this.state.mapping).map(e=>{if(this.state.mapping[e]){const t=this.state.mapping[e].properties,a=this.originalMapping[e]?this.originalMapping[e].properties:this.state.mapping[e].properties;return this.renderMapping(e,t,a,`${e}.properties`)}return null})),this.state.dirty&&this.state.editable?r.default.createElement(x.Footer,null,r.default.createElement(x.Button,{onClick:this.reIndex},"Confirm Mapping Changes"),r.default.createElement(x.Button,{ghost:!0,onClick:this.cancelChanges},"Cancel")):null,r.default.createElement(w.default,{types:Object.keys(this.state.mapping).filter(e=>!f.REMOVED_KEYS.includes(e)),show:this.state.showModal,addField:this.addField,onClose:this.toggleModal,deletedPaths:this.state.deletedPaths}),r.default.createElement(p.default,{show:this.state.isLoading,message:"Re-indexing your data... Please wait!"}),r.default.createElement(E.default,{show:this.state.showError,errorLength:this.state.errorLength,error:this.state.errorMessage,onClose:this.hideErrorModal}),r.default.createElement(N,{show:this.state.showFeedback,timeTaken:this.state.timeTaken,onClose:()=>window.location.reload()}),r.default.createElement(b.default,{show:this.state.showSynonymModal,onClose:this.handleSynonymModal},r.default.createElement(O,{disabled:!this.state.editable,name:"synonyms",value:this.state.synonyms,onChange:this.handleChange,placeholder:"Enter comma separated synonym pairs. Enter additional synonym pairs separated by new lines, e.g.\nbritish, english\nqueen, monarch",autosize:{minRows:2,maxRows:10}}),r.default.createElement(x.Button,{onClick:this.updateSynonyms,style:{float:"right",margin:"10px 0"}},this.state.synonyms?"Save":"Add"," Synonym"),r.default.createElement(x.Button,{ghost:!0,onClick:this.handleSynonymModal,style:{float:"right",margin:"10px"}},"Cancel")))):null:r.default.createElement(p.default,{show:!0,message:"Fetching mappings... Please wait!"})}}C.propTypes={appId:s.string,appName:s.string.isRequired,credentials:s.string,url:s.string,appbaseCredentials:s.string,mapping:s.object,getAppMappings:s.func.isRequired,updateCurrentApp:s.func.isRequired,getPermission:s.func.isRequired,isFetchingMapping:s.bool.isRequired},C.defaultProps={appId:null,credentials:null,url:void 0,appbaseCredentials:null,mapping:null};var k=(0,d.connect)(e=>{const t=(0,o.default)((0,g.getAppPermissionsByName)(e),"credentials",{}),a=t.username,n=t.password;return{appName:(0,o.default)(e,"$getCurrentApp.name"),appId:(0,o.default)(e,"$getCurrentApp.id"),mapping:(0,g.getRawMappingsByAppName)(e)||null,isFetchingMapping:(0,o.default)(e,"$getAppMappings.isFetching"),loadingError:(0,o.default)(e,"$getAppMappings.error",null),isPaid:(0,o.default)((0,g.getAppPlanByName)(e),"isPaid"),appbaseCredentials:a?`${a}:${n}`:null}},e=>({updateCurrentApp:(t,a)=>e((0,y.setCurrentApp)(t,a)),getPermission:t=>e((0,y.getPermission)(t)),getAppMappings:(t,a,n)=>{e((0,y.getAppMappings)(t,a,n))}}))(C);t.default=k},1554:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=function(e){return e&&e.__esModule?e:{default:e}}(a(1)),l=a(1555);var i=e=>e.show?n.default.createElement(l.Wrapper,null,n.default.createElement(l.Overlay,{onClick:e.onClose}),n.default.createElement("div",{className:"modal-wrapper"},e.children)):null;t.default=i},1555:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Overlay=t.Wrapper=void 0;var n=function(e){return e&&e.__esModule?e:{default:e}}(a(96));const l=(0,n.default)("div",{target:"etfahks0"})("display:flex;flex-direction:column;align-items:center;justify-content:center;z-index:999;position:fixed;top:0;left:0;width:100%;height:100%;.modal-wrapper{width:100%;max-width:800px;height:auto;background-color:#fff;border-radius:3px;padding:25px 30px;position:relative;z-index:1;h3{font-size:20px;font-weight:600;margin:12px 0 20px;}}");t.Wrapper=l;const i=(0,n.default)("div",{target:"etfahks1"})("position:fixed;top:0;left:0;width:100%;height:100%;background-color:rgba(0,0,0,0.7);");t.Overlay=i},1556:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a(17),a(326);var n=c(a(318));a(328);var l=c(a(133));a(546);var i=c(a(14));a(327);var r=c(a(319));a(593);var s=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,a):{};n.get||n.set?Object.defineProperty(t,a,n):t[a]=e[a]}return t.default=e,t}(a(1)),o=c(a(1109)),d=a(791),p=c(a(1132)),u=c(a(1131));function c(e){return e&&e.__esModule?e:{default:e}}function f(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const h=()=>s.default.createElement("div",{style:{maxWidth:250}},"Add a nested field by using the dot (.) notation, e.g. foo.bar will create a mapping like:",s.default.createElement("pre",{style:{marginTop:5,padding:10,backgroundColor:"#eee"}},"foo: {\n    bar: { ... }\n}")),m=()=>s.default.createElement("div",{style:{maxWidth:250}},"Based on the primary use case, whether search or aggregations, we will add the appropriate analyzers, mappings to ensure best results when performing the action");t.default=class extends s.Component{constructor(e){super(e),f(this,"getInitialState",()=>({esType:this.props.types[0]||"",name:"",usecase:"search",type:"text",error:""})),f(this,"handleEsTypeChange",e=>{this.setState({esType:e,fieldType:e})}),f(this,"handleNewFieldChange",e=>{const t=e.target,a=t.name,n=t.value;this.setState(function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{},n=Object.keys(a);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(a).filter(function(e){return Object.getOwnPropertyDescriptor(a,e).enumerable}))),n.forEach(function(t){f(e,t,a[t])})}return e}({},this.state.new,{[a]:n}))}),f(this,"addField",()=>{const e=this.state,t=e.esType,a=e.name,n=e.usecase,l=e.type,i=this.props.deletedPaths.map(e=>e.split(".properties.").join(".")),r=`${t}.${a}`;a&&i.includes(r)?this.setState({error:"You're trying to add a field which you just deleted. This will result in loss of data."}):a?(this.props.addField({name:r,type:l,usecase:"text"===l?n:null}),this.setState(()=>this.getInitialState()),this.props.onClose()):(this.input.current.focus(),this.setState({error:"Please enter a valid field name"}))}),this.usecases=u.default,this.input=s.default.createRef(),this.state=this.getInitialState()}render(){const e=this.state,t=e.fieldType,a=(e.esType,s.default.createElement(r.default,{onClick:e=>this.handleEsTypeChange(e.key)},this.props.types.map(e=>s.default.createElement(r.default.Item,{key:e},e)),t&&!this.props.types.includes(t)?s.default.createElement(r.default.Item,{key:t},`Create type ${t}`):null));return s.default.createElement(o.default,{show:this.props.show,onClose:this.props.onClose},s.default.createElement("h3",null,"Add New Field"),s.default.createElement("section",null,s.default.createElement(d.Header,null,s.default.createElement("span",{className:"col"},"Type"),s.default.createElement("span",{className:"col col--grow"},"Field Name",s.default.createElement(l.default,{title:h},s.default.createElement("span",null,s.default.createElement(i.default,{type:"info-circle"})))),"text"===this.state.type?s.default.createElement("span",{className:"col"},"Use case",s.default.createElement(l.default,{title:m},s.default.createElement("span",null,s.default.createElement(i.default,{type:"info-circle"})))):null,s.default.createElement("span",{className:"col"},"Data Type")),s.default.createElement("div",{style:{padding:"10px 0",display:"flex"}},s.default.createElement("span",{style:{width:150,marginRight:12}},s.default.createElement(n.default,{overlay:a},s.default.createElement(d.Input,{type:"text",name:"fieldType",value:this.state.fieldType,placeholder:"Select or Create Type",defaultValue:this.state.esType,onChange:this.handleNewFieldChange}))),s.default.createElement(d.Input,{ref:this.input,type:"text",name:"name",placeholder:"Enter field name",value:this.state.name,onChange:this.handleNewFieldChange}),"text"===this.state.type?s.default.createElement("select",{className:d.dropdown,name:"usecase",defaultValue:this.state.usecase,onChange:this.handleNewFieldChange},Object.entries(this.usecases).map(e=>s.default.createElement("option",{key:e[0],value:e[0]},e[1]))):null,s.default.createElement("select",{className:d.dropdown,name:"type",defaultValue:this.state.type,onChange:this.handleNewFieldChange},Object.keys(p.default).filter(e=>"object"!==e).map(e=>s.default.createElement("option",{key:e,value:e},e.split("_").join(" "))))),this.state.error?s.default.createElement("p",{style:{color:"tomato"}},this.state.error):null,s.default.createElement("div",{style:{display:"flex",flexDirection:"row-reverse",margin:"10px 0"}},s.default.createElement(d.Button,{onClick:this.addField},"Add Field"))))}}},1557:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(a(1)),l=r(a(1109)),i=a(791);function r(e){return e&&e.__esModule?e:{default:e}}const s=e=>n.default.createElement(l.default,{show:e.show,onClose:e.onClose},n.default.createElement("h3",null,e.errorLength?`${e.errorLength} records failed to index`:"An error occured"),e.message?n.default.createElement("p",null,e.message):n.default.createElement("p",null,"To prevent data loss, we have restored your original mappings. You can fix"," ",e.errorLength?"these":"this"," and retry."),e.error?n.default.createElement(i.ErrorLogger,null,e.error):null,n.default.createElement("div",{style:{display:"flex",flexDirection:"row-reverse",margin:"10px 0"}},n.default.createElement(i.Button,{ghost:!0,onClick:e.onClose},"Close")));s.displayName="ErrorModal";var o=s;t.default=o},593:function(e,t,a){a(137)("split",2,function(e,t,n){"use strict";var l=a(339),i=n,r=[].push;if("c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length){var s=void 0===/()??/.exec("")[1];n=function(e,t){var a=String(this);if(void 0===e&&0===t)return[];if(!l(e))return i.call(a,e,t);var n,o,d,p,u,c=[],f=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":""),h=0,m=void 0===t?4294967295:t>>>0,g=new RegExp(e.source,f+"g");for(s||(n=new RegExp("^"+g.source+"$(?!\\s)",f));(o=g.exec(a))&&!((d=o.index+o[0].length)>h&&(c.push(a.slice(h,o.index)),!s&&o.length>1&&o[0].replace(n,function(){for(u=1;u<arguments.length-2;u++)void 0===arguments[u]&&(o[u]=void 0)}),o.length>1&&o.index<a.length&&r.apply(c,o.slice(1)),p=o[0].length,h=d,c.length>=m));)g.lastIndex===o.index&&g.lastIndex++;return h===a.length?!p&&g.test("")||c.push(""):c.push(a.slice(h)),c.length>m?c.slice(0,m):c}}else"0".split(void 0,0).length&&(n=function(e,t){return void 0===e&&0===t?[]:i.call(this,e,t)});return[function(a,l){var i=e(this),r=void 0==a?void 0:a[t];return void 0!==r?r.call(a,i,l):n.call(String(i),a,l)},n]})},654:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=function(e){return e&&e.__esModule?e:{default:e}}(a(655)).default;t.default=n},655:function(e,t,a){"use strict";a(17),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=a(36);a(321);var l=s(a(322)),i=s(a(1)),r=a(314);function s(e){return e&&e.__esModule?e:{default:e}}function o(){return(o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function d(e,t){if(null==e)return{};var a,n,l=function(e,t){if(null==e)return{};var a,n,l={},i=Object.keys(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||(l[a]=e[a]);return l}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(l[a]=e[a])}return l}const p=l.default.Header;var u=e=>{let t=e.children,a=e.compact,l=d(e,["children","compact"]);return i.default.createElement(p,o({className:(0,n.css)({backgroundColor:"#fff",height:"auto",boxShadow:"0 1px 1px 0 rgba(0,0,0,0.05)",[r.mediaKey.medium]:{padding:"0 30px"}})},l),i.default.createElement("div",{className:(0,n.css)({padding:a?"25px 0px":"45px 25px",margin:"0 auto",maxWidth:a?"none":1300,[r.mediaKey.medium]:{padding:"40px 0 25px"}})},t))};t.default=u},791:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.promotionContainer=t.ErrorLogger=t.Input=t.deleteBtn=t.Button=t.Footer=t.subItem=t.item=t.dropdown=t.title=t.row=t.heading=t.Header=t.HeaderWrapper=t.card=void 0;var n=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,a):{};n.get||n.set?Object.defineProperty(t,a,n):t[a]=e[a]}return t.default=e,t}(a(96));const l=(0,n.css)("width:100%;max-width:980px;margin:25px auto;background-color:#fff;border-radius:3px;box-shadow:0 3px 5px 0 rgba(0,0,0,0.05);box-sizing:border-box;i{margin:3px 3px 0px 8px;}.card-info{border-bottom:1px solid #eee;padding:20px;display:flex;align-items:center;justify-content:space-between;@media (max-width:620px){align-items:flex-start;flex-direction:column;}}.card-button{@media (max-width:620px){margin-left:0;margin-top:10px;}}");t.card=l;const i=(0,n.default)("div",{target:"e1779ibv0"})("display:flex;flex-direction:column;align-items:flex-start;justify-content:center;p{font-size:13px;margin:6px 0 0;color:#999;}");t.HeaderWrapper=i;const r=(0,n.default)("header",{target:"e1779ibv1"})("display:flex;flex-direction:row;justify-content:space-between;font-weight:600;padding-top:20px;@media (max-width:700px){flex-direction:column;padding:0 10px;}.col-container{display:flex;justify-content:space-between;}.col{min-width:150px;display:inline-flex;margin:0 0 0 12px;text-align:center;&:first-child{margin:0;}&.col--grow{flex-grow:1;}@media (max-width:460px){min-width:80px;}}");t.Header=r;const s=(0,n.css)("font-size:16px;letter-spacing:0.015rem;font-weight:600;margin:0;padding:0;");t.heading=s;const o=(0,n.css)("box-sizing:border-box;background-color:rgba(0,0,0,0.02);padding:15px 0 15px 15px;margin:15px 0;border:1px solid rgba(0,0,0,0.05);");t.row=o;const d=(0,n.css)("font-size:15px;letter-spacing:0.015rem;font-weight:600;margin:0 0 12px 0;padding:0;");t.title=d;const p=(0,n.css)("width:auto;min-width:150px;height:34px;border:1px solid #f8f8f8;box-shadow:0 3px 5px 0 rgba(0,0,0,0.05);background-color:#fff;border-radius:2px;outline-color:#c7f4ff;margin-left:12px;padding:6px 15px 6px 6px;text-transform:capitalize;@media (max-width:700px){margin-left:0px;margin-top:10px;padding:0;}@media (max-width:460px){min-width:80px;}");t.dropdown=p;const u=(0,n.css)("display:flex;flex-direction:row;justify-content:space-between;padding:10px;margin-bottom:2px;align-items:center;background-color:rgba(255,255,255,0.8);@media (max-width:700px){flex-direction:column;align-items:flex-start;}");t.item=u;const c=(0,n.css)("display:flex;flex-direction:row;align-items:center;@media (max-width:700px){width:100%;justify-content:space-between;}");t.subItem=c;const f=(0,n.default)("footer",{target:"e1779ibv2"})("position:sticky;bottom:0;width:100%;height:66px;box-shadow:0 -3px 5px 0 rgba(0,0,0,0.02);background-color:#fff;transition:all 0.3s ease;border-bottom-left-radius:3px;border-bottom-right-radius:3px;padding:0 20px;display:flex;flex-direction:row-reverse;align-items:center;");t.Footer=f;const h=(0,n.default)("a",{target:"e1779ibv3"})("display:inline-flex;height:42px;padding:0 20px;justify-content:center;align-items:center;color:#53683b;font-weight:600;background-color:",e=>e.ghost?"#efefef":"#b6ef7e",";text-transform:uppercase;box-shadow:0 3px 3px 0 rgba(0,0,0,0.1);cursor:pointer;margin-left:12px;&:hover,&:focus{background-color:",e=>e.ghost?"#fafafa":"#c3f295",";box-shadow:0 5px 5px 0 rgba(0,0,0,0.1);text-decoration:none;}");t.Button=h;const m=(0,n.css)("display:flex;flex-grow:1;alignitems:center;flex-direction:row;cursor:pointer;@media (max-width:700px){width:100%;font-weight:600;}span{max-width:calc(100% - 40px);white-space:nowrap;overflow:hidden;text-overflow:ellipsis;}a{display:none;cursor:pointer;color:#444;margin-left:15px;transition:all 0.3s ease;color:tomato;@media (max-width:700px){display:inline;}}&:hover a,&:focus a{display:inline;&:hover,&:focus{color:red;}}");t.deleteBtn=m;const g=(0,n.default)("input",{target:"e1779ibv4"})("diplay:flex;flex-grow:1;min-width:150px;height:34px;border:1px solid #f8f8f8;box-shadow:0 3px 5px 0 rgba(0,0,0,0.05);background-color:#fff;border-radius:2px;outline-color:#c7f4ff;padding:5px;");t.Input=g;const y=(0,n.default)("pre",{target:"e1779ibv5"})("height:auto;max-height:200px;overflow-y:scroll;width:100%;background-color:#eee;padding:10px;font-family:monospace;font-size:14px;");t.ErrorLogger=y;const x=(0,n.css)("display:flex;flex-direction:row;align-items:center;@media (max-width:940px){margin:10px 0;align-items:flex-start;flex-direction:column;}.promotional-button{@media (max-width:940px){margin-left:0;margin-top:10px;}}.promotional-info{margin:0 8px 0 0;color:#888;@media (max-width:940px){font-size:14px;font-weight:400;}}");t.promotionContainer=x},936:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=function(e){return e&&e.__esModule?e:{default:e}}(a(937)).default;t.default=n},937:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=l(a(1));function l(e){return e&&e.__esModule?e:{default:e}}const i=(0,l(a(96)).default)("div",{target:"e11gv58d0"})("position:fixed;top:0;left:0;width:100%;height:100%;background-color:rgba(0,0,0,0.7);z-index:999;color:#fff;display:flex;padding:20px;flex-direction:column;align-items:center;justify-content:center;font-size:16px;letter-spacing:0.04rem;font-weight:300;");var r=e=>e.show?n.default.createElement(i,null,n.default.createElement("p",null,e.message||"Loading...")):null;t.default=r}}]);